<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>H4R Build Animation Overlay</title>

<!-- GSAP for timeline animation -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

<style>
  :root {
    --base-size: 400px; /* overall scale of the overlay */
  }

  body {
    margin: 0;
    padding: 0;
    background: transparent;
    overflow: hidden;
    font-family: system-ui, sans-serif;
  }

  /* Wrapper that you add as a Browser Source in OBS */
  .overlay-stage {
    position: relative;
    width: var(--base-size);
    height: var(--base-size);
    /* center on transparent canvas */
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
  }

  /* We'll group everything so we can disperse as a set at the end */
  .logo-group {
    position: relative;
    width: 100%;
    height: 100%;
    transform-origin: center center;
  }

  /* Big heart base */
  .big-heart {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 100%;
    height: 100%;
    transform: translate(-50%, -50%);
    transform-origin: center center;
  }

  .big-heart img {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 100%;
    height: 100%;
    object-fit: contain;
    transform: translate(-50%, -50%);
  }

  /* The H4R text that sits on top of the big heart */
  .h4r-text {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 60%;
    height: 60%;
    transform: translate(-50%, -50%);
    transform-origin: center center;
    /* we'll animate opacity/scale in JS */
  }

  .h4r-text img {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 100%;
    height: 100%;
    object-fit: contain;
    transform: translate(-50%, -50%);
  }

  /* The little heart in the corner */
  .small-heart {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 40%;
    height: 40%;
    transform-origin: center center;
    /* we will position it in JS to land at top-right of the big heart */
  }

  .small-heart img {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 100%;
    height: 100%;
    object-fit: contain;
    transform: translate(-50%, -50%);
  }

  /* optional subtle glow behind the whole build when "complete" */
  .glow {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 110%;
    height: 110%;
    border-radius: 50%;
    filter: blur(40px);
    background: radial-gradient(
      rgba(255, 70, 100, 0.4) 0%,
      rgba(0, 0, 0, 0) 70%
    );
    transform: translate(-50%, -50%);
    opacity: 0;
    pointer-events: none;
  }

  /* Make the canvas fill browser source nicely.
     If you want a specific source size in OBS (like 500x500),
     just set the Browser Source width/height there.
  */
  .stage-wrapper {
    width: 100vw;
    height: 100vh;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>
</head>

<body>
<div class="stage-wrapper">
  <div class="overlay-stage">
    <div class="logo-group" id="logoGroup">
      <div class="glow" id="glow"></div>

      <div class="big-heart" id="bigHeart">
        <img src="big-heart.png" alt="Big Heart">
      </div>

      <div class="h4r-text" id="h4rText">
        <img src="h4r-text.png" alt="H4R Text">
      </div>

      <div class="small-heart" id="smallHeart">
        <img src="small-heart.png" alt="Small Heart">
      </div>
    </div>
  </div>
</div>

<script>
/*
Animation order:
1. Reset state: bigHeart visible; text + smallHeart hidden/offscreen.
2. Text pops in.
3. Small heart flies in from offscreen, lands, spins 4x slowly.
4. Glow rises.
5. Disperse: everything drifts out & fades.
6. Loop.
*/

const bigHeart   = document.getElementById('bigHeart');
const h4rText    = document.getElementById('h4rText');
const smallHeart = document.getElementById('smallHeart');
const logoGroup  = document.getElementById('logoGroup');
const glow       = document.getElementById('glow');

// We'll tune these numbers so the little heart "lands" near top-right.
const LAND_X = 60;   // px offset right from center
const LAND_Y = -120; // px offset up from center
const START_X = 200; // offscreen start (further right/up)
const START_Y = -260;

// Build GSAP timeline
const tl = gsap.timeline({
  repeat: -1,
  repeatDelay: 0.5,
  defaults: { ease: "power2.out" }
});

function setStartState() {
  // Group is in place
  gsap.set(logoGroup, {
    scale: 1,
    opacity: 1,
    x: 0,
    y: 0,
    rotation: 0,
    transformOrigin: "50% 50%"
  });

  // Big heart: already visible from frame 1
  gsap.set(bigHeart, {
    scale: 0.8,
    opacity: 0,
    rotation: 0,
    x: 0,
    y: 0,
    transformOrigin: "50% 50%"
  });

  // Text starts hidden/small
  gsap.set(h4rText, {
    scale: 0.5,
    opacity: 0,
    rotation: 0,
    x: 0,
    y: 0,
    transformOrigin: "50% 50%"
  });

  // Small heart starts offscreen and invisible
  gsap.set(smallHeart, {
    scale: 0.5,
    opacity: 0,
    rotation: 0,
    x: START_X,
    y: START_Y,
    transformOrigin: "50% 50%"
  });

  // Glow starts off
  gsap.set(glow, {
    opacity: 0,
    scale: 0.6,
    transformOrigin: "50% 50%"
  });
}

// Timeline definition
setStartState();

// Step 1: Big heart fade/scale in
tl.to(bigHeart, {
  duration: 0.6,
  scale: 1,
  opacity: 1,
  ease: "power3.out"
}, 0);

// Step 2: Text pops in after heart
tl.to(h4rText, {
  duration: 0.5,
  scale: 1,
  opacity: 1,
  ease: "back.out(1.8)"
}, "+=0.1");

// Step 3: Small heart flies in & lands
tl.to(smallHeart, {
  duration: 0.7,
  x: LAND_X,
  y: LAND_Y,
  scale: 1,
  opacity: 1,
  ease: "power3.out"
}, "+=0.05");

// Step 3b: Small heart slow spin x4 (1440deg)
tl.to(smallHeart, {
  duration: 4,
  rotation: 360 * 4,
  ease: "none"
}, ">");

// Step 4: Glow pulse on final form
tl.to(glow, {
  duration: 0.4,
  opacity: 1,
  scale: 1,
  ease: "power2.out"
}, "<"); // glow comes up while it's spinning

// Hold final pose for a moment
tl.to({}, {duration: 1});

// Step 5: Disperse everything outward & fade
// bigHeart drifts down-left
tl.to(bigHeart, {
  duration: 0.6,
  x: -80,
  y: 80,
  scale: 0.4,
  opacity: 0,
  ease: "power2.in"
}, "disperse");

// text drifts up
tl.to(h4rText, {
  duration: 0.6,
  x: 0,
  y: -120,
  scale: 0.4,
  opacity: 0,
  ease: "power2.in"
}, "disperse");

// smallHeart shoots up-right
tl.to(smallHeart, {
  duration: 0.6,
  x: LAND_X + 150,
  y: LAND_Y - 150,
  scale: 0.4,
  opacity: 0,
  rotation: "+=120",
  ease: "power2.in"
}, "disperse");

// glow fades out
tl.to(glow, {
  duration: 0.6,
  opacity: 0,
  scale: 1.2,
  ease: "power2.in"
}, "disperse");

// Shrink the whole group slightly at the end for a cleaner reset snap
tl.to(logoGroup, {
  duration: 0.6,
  scale: 0.8,
  opacity: 0.0,
  ease: "power2.in",
  onComplete: () => {
    // reset all pieces for the loop
    setStartState();
  }
}, "disperse+=0");

// done â€“ timeline will repeat forever
</script>
</body>
</html>
